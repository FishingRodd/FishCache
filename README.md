支持功能：

1. LRU缓存淘汰算法、缓存TTL机制
2. consistenthash一致性哈希、负载均衡
3. gRPC协议进行节点间传输，Server端实现
4. 分布式动态节点管理
5. 并发访问控制、singleFlight
6. metric上传promethues的监控实现



实现顺序：

1. ### LRU缓存淘汰算法和TTL机制实现

   - LRU数据结构实现：使用哈希表和双向链表实现LRU算法。哈希表用于快速查找缓存项，双向链表用于记录缓存项的使用顺序。
   - 添加TTL机制：为每个缓存项添加一个过期时间戳，在插入和访问缓存项时更新时间戳，在淘汰缓存项时检查时间戳以判断是否过期。

2. **主Group结构的实现**

   - 定义Group结构：包含LRU缓存、一致性哈希实例、锁等成员变量。
   - 并发限制：使用互斥锁或其他并发控制机制来保护Group结构的并发访问。

3. **一致性哈希数据结构实现**

   - 一致性哈希算法实现：实现计算节点哈希值、添加/删除节点、查找最近节点等功能。
   - Node和VNode映射：每个节点被映射为多个虚拟节点，以提高缓存分布的均匀性。

4. **gRPC Server端实现**

   - 定义gRPC服务接口：定义缓存操作（如Get、Set、Delete等）的gRPC服务接口。
   - 实现gRPC服务端逻辑：处理客户端请求，调用本地缓存操作，并返回结果。

5. **节点管理**

   - 节点管理：动态调整一致性哈希环。
   
6. **并发访问控制、SingleFlight实现**

   - 并发访问控制：在Group结构中使用互斥锁或其他并发控制机制来确保缓存操作的线程安全。
   - SingleFlight实现：包装Group的Remote Get方法，确保同一键的并发请求只执行一次，减少重复工作并提高性能。

# 介绍

基于 Go 1.23.0 实现的高可用、分布式缓存应用。

支持：

1. LRU缓存淘汰算法、缓存TTL机制
2. consistenthash一致性哈希、负载均衡
3. gRPC协议进行节点间传输
4. etcd服务注册与发现、动态节点管理
5. 并发访问控制、singleFlight

# 获取

```
git clone https://github.com/FishingRodd/FishCache.git
```

# 使用

在`11.0.1.1:23333`启动一个缓存节点，向`11.0.1.111:2379`的etcd服务发起注册

```
go run main.go -host 11.0.1.1:23333 -etcd 11.0.1.111:2379
```

